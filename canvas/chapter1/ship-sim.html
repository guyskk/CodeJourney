<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Acceleration</title>
    <link rel="stylesheet" href="base.css">
    <style>
    body {
        background: #000;
    }
    </style>
</head>

<body>
    <canvas id="canvas"></canvas>
    <script src="utils.js"></script>
    <script src="ship.js"></script>
    <script>
    window.onload = function() {
        var W = window.innerWidth,
            H = window.innerHeight;
        var canvas = document.getElementById("canvas"),
            context = canvas.getContext("2d"),
            ship = new Ship(),
            vr = 0;
        vx = 0,
        vy = 0,
        thrust = 0;

        canvas.width = W;
        canvas.height = H;

        ship.x = canvas.width / 2;
        ship.y = canvas.height / 2;


        window.addEventListener("keydown", function(e) {
            var keyCode = e.keyCode;
            switch (keyCode) {
                case 37:
                    vr = -3;
                    break;
                case 38:
                    thrust = 0.05;
                    ship.showFlame = true;
                    break;
                case 39:
                    vr = 3;
                    break;

            }
        }, false);

        window.addEventListener("keyup", function() {
            vr = 0;
            thrust = 0;
            ship.showFlame = false;
        }, false);

        function draw() {
            context.clearRect(0, 0, canvas.width, canvas.height);
            ship.rotation += vr * Math.PI / 180;
            var angle = ship.rotation,
                ax = Math.cos(angle) * thrust,
                ay = Math.sin(angle) * thrust;

            vx + ax;
            vy += ay;

            ship.x += vx;
            ship.y += vy;
            ship.draw(context);
        }
        var timer = setInterval(function() {
            draw();
        }, 30);
    }
    </script>
</body>

</html>
