/*! mplayers 10-08-2014 */
function getSongList(a){console.log(a.data.songList);for(var b=a.data.songList,c=0,d=b.length;d>c;c++)SONGLIST[c]=b[c]}!function(){function a(a){this.target=a,this.status=!1}SONGIDS=[],SONGLIST=[],a.prototype.addItem=function(a,b){this[a]=b},a.prototype.emitplay=function(){var a=this,b=this.play,c=this.audio;b.addEventListener("click",function(){a.status?(a.status=!1,b.title="播放",c.pause()):(a.status=!0,b.title="暂停",c.play())},!1)},a.prototype.adjustVolume=function(){var a=this.volumeDown,b=this.volumeUp,c=this.audio;a.addEventListener("click",function(){c.volume>0&&(c.volume=(c.volume-.1).toFixed(1))},!1),b.addEventListener("click",function(){c.volume<1&&(c.volume=(c.volume+.1).toFixed(1))},!1)},a.prototype.prev=function(){var a=this,b=this.backward,c=this.audio,d=0;b.addEventListener("click",function(){a.playList||alert("没有上一首!"),c.src="http://stream19.qqmusic.qq.com/30081265.mp3",c.play(),d++},!1)},a.prototype.next=function(){var a=this,b=this.forward,c=this.audio,d=0;b.addEventListener("click",function(){a.playList||alert("没有下一首!"),c.src=SONGLIST[d].songLink,c.play(),d++},!1)},a.prototype.init=function(){this.emitplay(),this.adjustVolume(),this.next(),this.prev()},a.prototype.addPlayList=function(a){this.playList=a},window.onload=function(){var b=document.getElementsByTagName("audio")[0],c=document.getElementById("control-play"),d=document.getElementById("control-backward"),e=document.getElementById("control-forward"),f=document.getElementById("control-volume-down"),g=document.getElementById("control-volume-up"),h=new a(b);h.addItem("audio",b),h.addItem("play",c),h.addItem("backward",d),h.addItem("forward",e),h.addItem("volumeDown",f),h.addItem("volumeUp",g),h.playList=SONGLIST,h.init()}}();var mplayers={},mplayers={ajax:{getRequest:null}};mplayers.ajax.getRequest=function(a,b){var c=new XMLHttpRequest;a="php/proxy.php?url="+a,c.open("GET",a,!1),c.onreadystatechange=function(){4==c.readyState&&200==c.status&&b(c.responseText)},c.send(null)},mplayers.ajax.postRequest=function(a,b,c){var d=new XMLHttpRequest;d.open("POST",a,!1),d.setRequestHeader("Content-Type","applicaiotn/x-www-form-urlencoded"),d.setRequestHeader("Access-Control-Allow-Origin","*"),d.send(b),d.onreadystatechange=function(){4==d.readyState&&200==d.status&&c(d.responseText)}},mplayers.addScript=function(a,b){var c=document.createElement("script"),d=document.getElementsByTagName("head")[0];c.onload=function(){b()},d.appendChild(c),c.src=a},mplayers.getTime=function(){var a=new Date;return a.getTime()};var baiduFm={channel:"public_yuzhong_huayu",getHashCode:"http://fm.baidu.com/dev/api/?tn=usercounts&_="+mplayers.getTime(),getPlayList:"http://fm.baidu.com/dev/api/?tn=playlist&id="+this.channel+"&special=flash&prepend=&format=json&_="+mplayers.getTime(),getSongList:"http://music.baidu.com/data/music/fmlink?type=mp3&rate=128&songIds=615750,50326329,285172&callback=jsonpGetSongList&_=1407594343228"};mplayers.ajax.getRequest(baiduFm.getHashCode,function(a){var b=JSON.parse(a).hash_code;console.log(b)}),mplayers.ajax.getRequest(baiduFm.getPlayList,function(a){for(var b=JSON.parse(a).list,c="",d=0;d<b.length;d++)c+=b[d].id+",";var e="http://music.baidu.com/data/music/fmlink?type=mp3&rate=128&songIds="+c+"&callback=getSongList&_="+mplayers.getTime();mplayers.addScript(e,function(){console.log("jsonp success!")})});